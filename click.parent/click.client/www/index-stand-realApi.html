<!DOCTYPE html>
<html lang="en" id="htmlId" ontouchstart="touchStart()" ontouchend="touchEnd()"
      onselectstart="return false" onpaste="return false;" onCopy="return false" onCut="return false" onDrag="return false" onDrop="return false" autocomplete=off>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=device-dpi, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- CSS -->
  <link href="css/MainPage.css" rel="stylesheet">

  <!-- JS COMMON -->
  <script src="lib/js/riot.js"></script>
  <script src="lib/js/all.js"></script>

  <script src="js/encryption/sha512.js"></script>
  <script src="js/encryption/md5.js"></script>
  <script src="js/api/WebApi.js"></script>
  <script src="js/globalObjects/global.Objects.js"></script>

  <!-- FAKES -->
  <script src="stand/plugins/sms_fake.js"></script>
  <script src="stand/plugins/plugins_fake.js"></script>

</head>

<body id="bodyId">

<div id="riotTags">
  <view-main-page></view-main-page>
</div>

<script>
  api.init();
  var startApplication = function () {
    if(localStorage.getItem('click_client_token')) {
      this.riotTags.innerHTML = "<view-authorization>";
      riot.mount('view-authorization')
    }
    else{
      this.riotTags.innerHTML = "<view-registration-device>";
      riot.mount('view-registration-device');
    }
    riot.mount('view-main-page');
    riot.mount('component-menu');
  };

  if (window.cordova) {
    document.addEventListener("deviceready", function () {
      startApplication();
    }, false);
  } else {
    startApplication();
  }

  //MENU FUNCTIONS FOR ALL PAGES
  var touchStartX, touchEndX;
  touchStart = function () {
    touchStartX = event.changedTouches[0].pageX;
  }

  touchEnd = function (){

    touchEndX = event.changedTouches[0].pageX;
    if(touchStartX < touchEndX && touchStartX <=15){
      this.menuOpen();
    }
  }

</script>
</body>
</html>
